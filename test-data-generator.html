<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Data Generator - RDB Case Management</title>
  <link rel="stylesheet" href="charcoal.css">
  <style>
    .generator-container {
      max-width: 1000px;
      margin: 2rem auto;
      padding: 2rem;
    }
.control-panel {
  background: var(--charcoal-panel);
  border: 2px solid var(--accent);
  border-radius: 8px;
  padding: 2rem;
  margin-bottom: 2rem;
}

.button-group {
  display: flex;
  gap: 1rem;
  flex-wrap: wrap;
  margin-bottom: 1.5rem;
}

.btn-generate {
  background: var(--accent);
  color: var(--text-primary);
  padding: 1rem 2rem;
  border: none;
  border-radius: 6px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.btn-generate:hover {
  background: var(--hover);
  transform: translateY(-2px);
}

.btn-danger {
  background: var(--danger);
}

.btn-danger:hover {
  background: #c62828;
}

.btn-secondary {
  background: var(--charcoal-bg);
  border: 2px solid var(--accent);
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
  margin-top: 2rem;
}

.stat-card {
  background: var(--charcoal-bg);
  border: 1px solid var(--border-dark);
  border-radius: 6px;
  padding: 1.5rem;
  text-align: center;
}

.stat-number {
  font-size: 2.5rem;
  font-weight: 700;
  color: var(--accent);
  margin-bottom: 0.5rem;
}

.stat-label {
  font-size: 0.9rem;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.log-container {
  background: var(--charcoal-bg);
  border: 1px solid var(--border-dark);
  border-radius: 6px;
  padding: 1.5rem;
  max-height: 400px;
  overflow-y: auto;
  font-family: 'Courier New', monospace;
  font-size: 0.85rem;
}

.log-entry {
  padding: 0.5rem;
  border-bottom: 1px solid var(--border-dark);
  color: var(--text-secondary);
}

.log-entry.success {
  color: var(--success);
}

.log-entry.error {
  color: var(--danger);
}

.log-entry.info {
  color: var(--accent);
}

.section-title {
  font-size: 1.2rem;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 1rem;
  padding-bottom: 0.5rem;
  border-bottom: 2px solid var(--accent);
}

.warning-box {
  background: rgba(255, 179, 0, 0.1);
  border: 2px solid var(--warning);
  border-radius: 6px;
  padding: 1rem;
  margin-bottom: 1.5rem;
  color: var(--text-primary);
}

.warning-box strong {
  color: var(--warning);
}
</style>
</head>
<body>
  <header class="site-header">
    <div class="site-title">Test Data Generator</div>
    <nav class="site-nav">
      <div class="menu-group">
        <button class="btn" onclick="location.href='dashboard.html'">Dashboard</button>
        <button class="btn" onclick="location.href='pipeline.html'">Pipeline</button>
        <button class="btn" onclick="location.href='scorecard.html'">Scorecard</button>
      </div>
    </nav>
  </header>
  <main class="generator-container">
    <h1 class="form-title">Test Data Generator</h1>
<div class="warning-box">
  <strong>⚠️ Warning:</strong> This tool generates fake data for testing. The "Clear All Data" button will permanently delete all localStorage data including any real cases you may have entered.
</div>

<div class="control-panel">
  <div class="section-title">Generate Test Data</div>
  
  <div class="button-group">
    <button class="btn-generate" onclick="generateSmallDataset()">
      Generate 5 Cases (Quick Test)
    </button>
    <button class="btn-generate" onclick="generateMediumDataset()">
      Generate 15 Cases (Full Test)
    </button>
    <button class="btn-generate" onclick="generateLargeDataset()">
      Generate 30 Cases (Stress Test)
    </button>
  </div>

  <div class="button-group">
    <button class="btn-generate btn-secondary" onclick="refreshStats()">
      Refresh Statistics
    </button>
    <button class="btn-generate btn-danger" onclick="clearAllData()">
      Clear All Data
    </button>
  </div>
</div>

<div class="control-panel">
  <div class="section-title">Current Data Statistics</div>
  
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-number" id="stat-cases">0</div>
      <div class="stat-label">Cases</div>
    </div>
    <div class="stat-card">
      <div class="stat-number" id="stat-interviews">0</div>
      <div class="stat-label">Interviews</div>
    </div>
    <div class="stat-card">
      <div class="stat-number" id="stat-updates">0</div>
      <div class="stat-label">Updates</div>
    </div>
    <div class="stat-card">
      <div class="stat-number" id="stat-reports">0</div>
      <div class="stat-label">Reports</div>
    </div>
    <div class="stat-card">
      <div class="stat-number" id="stat-billings">0</div>
      <div class="stat-label">Billings</div>
    </div>
  </div>
</div>

<div class="control-panel">
  <div class="section-title">Activity Log</div>
  <div class="log-container" id="activity-log">
    <div class="log-entry info">Ready to generate test data...</div>
  </div>
</div>
</main>
  <footer class="site-footer">
    <div class="version-stamp">RDB Test Data Generator v1.0</div>
  </footer>
  <script>
    // Sample data pools
    const clients = [
      'State Farm Insurance',
      'Farmers Insurance',
      'Allstate Insurance',
      'Liberty Mutual',
      'GEICO Insurance',
      'Progressive Insurance',
      'Nationwide Insurance',
      'USAA Insurance',
      'Travelers Insurance',
      'American Family Insurance'
    ];

    const investigators = ['Conrad', 'Delores', 'Michael', 'Lisa', 'Jeff', 'Sarah', 'Robert', 'Amanda'];

    const firstNames = ['John', 'Jane', 'Michael', 'Sarah', 'Robert', 'Emily', 'David', 'Lisa', 'James', 'Mary', 
                        'William', 'Patricia', 'Richard', 'Jennifer', 'Thomas', 'Linda', 'Charles', 'Barbara'];
    
    const lastNames = ['Smith', 'Johnson', 'Williams', 'Brown', 'Jones', 'Garcia', 'Miller', 'Davis', 'Rodriguez', 
                       'Martinez', 'Hernandez', 'Lopez', 'Gonzalez', 'Wilson', 'Anderson', 'Thomas', 'Taylor', 'Moore'];

    const injuryTypes = ['Back injury', 'Neck injury', 'Knee injury', 'Shoulder injury', 'Hip injury', 
                         'Wrist injury', 'Ankle injury', 'Head injury', 'Multiple injuries'];

    const sampleNotes = [
      'Follow up needed on medical records',
      'Waiting for client response',
      'Claimant difficult to reach',
      'Case progressing well',
      'Need to schedule follow-up interview',
      'Review surveillance footage',
      'Awaiting attorney callback',
      'Priority case - expedite',
      ''  // Some cases have no notes
    ];

    const statuses = ['Open', 'Scheduled', 'In Progress', 'Completed', 'Billed'];

    // Logging functions
    function log(message, type = 'info') {
      const logContainer = document.getElementById('activity-log');
      const entry = document.createElement('div');
      entry.className = `log-entry ${type}`;
      entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
      logContainer.insertBefore(entry, logContainer.firstChild);
      
      // Keep only last 50 entries
      while (logContainer.children.length > 50) {
        logContainer.removeChild(logContainer.lastChild);
      }
    }

    // Utility functions
    function randomItem(array) {
      return array[Math.floor(Math.random() * array.length)];
    }

    function randomDate(daysAgo) {
      const date = new Date();
      date.setDate(date.getDate() - Math.floor(Math.random() * daysAgo));
      return date.toISOString().split('T')[0];
    }

    function randomDateAfter(startDate, daysAfter) {
      const date = new Date(startDate);
      date.setDate(date.getDate() + Math.floor(Math.random() * daysAfter) + 1);
      return date.toISOString().split('T')[0];
    }

    function generateClaimNumber() {
      const year = new Date().getFullYear();
      const num = Math.floor(Math.random() * 9000) + 1000;
      return `${year}-${num}`;
    }

    function generatePhone() {
      const area = Math.floor(Math.random() * 900) + 100;
      const prefix = Math.floor(Math.random() * 900) + 100;
      const line = Math.floor(Math.random() * 9000) + 1000;
      return `${area}-${prefix}-${line}`;
    }

    // Data generation functions
    function generateCase(claimNumber, assignmentDate, targetStatus) {
      const caseKey = `case_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
      
      const caseData = {
        claimNumber: claimNumber,
        clientCompany: randomItem(clients),
        claimantFirst: randomItem(firstNames),
        claimantLast: randomItem(lastNames),
        claimantPhone: generatePhone(),
        claimantEmail: `${randomItem(firstNames).toLowerCase()}@email.com`,
        injuryType: randomItem(injuryTypes),
        incidentDate: randomDate(90),
        assignmentDate: assignmentDate,
        investigatorAssigned: randomItem(investigators),
        status: targetStatus,
        dateCreated: assignmentDate,
        lastUpdate: assignmentDate,
        conradNotes: randomItem(sampleNotes)
      };

      localStorage.setItem(caseKey, JSON.stringify(caseData));
      return { key: caseKey, data: caseData };
    }

    function generateInterview(caseObj, interviewDate) {
      const interviewKey = `interview_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
      
      const interviewData = {
        caseKey: caseObj.key,
        claimNumber: caseObj.data.claimNumber,
        interviewDate: interviewDate,
        interviewTime: '10:00',
        interviewLocation: 'Office',
        investigatorAssigned: caseObj.data.investigatorAssigned,
        dateCreated: interviewDate
      };

      localStorage.setItem(interviewKey, JSON.stringify(interviewData));
      
      // Update case status and dates
      caseObj.data.status = 'Scheduled';
      caseObj.data.firstInterviewScheduled = true;
      caseObj.data.firstInterviewDate = interviewDate;
      caseObj.data.dateAssignedToInvestigator = interviewDate;
      localStorage.setItem(caseObj.key, JSON.stringify(caseObj.data));
      
      return interviewData;
    }

    function generateUpdate(caseObj, updateDate) {
      const updateKey = `update_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
      
      const updateData = {
        caseKey: caseObj.key,
        claimNumber: caseObj.data.claimNumber,
        updateDate: updateDate,
        lastAction: 'Interview conducted, awaiting medical records',
        nextAction: 'Review medical records and prepare report',
        investigatorAssigned: caseObj.data.investigatorAssigned,
        dateCreated: updateDate
      };

      localStorage.setItem(updateKey, JSON.stringify(updateData));
      
      // Update case
      caseObj.data.lastUpdate = updateDate;
      const nextDue = new Date(updateDate);
      nextDue.setDate(nextDue.getDate() + 7);
      caseObj.data.updateDueDate = nextDue.toISOString().split('T')[0];
      localStorage.setItem(caseObj.key, JSON.stringify(caseObj.data));
      
      return updateData;
    }

    function generateReport(caseObj, submissionDate) {
      const reportKey = `reportSubmission_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
      
      const reportData = {
        caseKey: caseObj.key,
        claimNumber: caseObj.data.claimNumber,
        submissionDate: submissionDate,
        investigatorAssigned: caseObj.data.investigatorAssigned,
        reportComplete: true,
        recordsReviewed: true,
        photosIncluded: true,
        timelineComplete: true,
        findingsSummarized: true,
        dateCreated: submissionDate
      };

      localStorage.setItem(reportKey, JSON.stringify(reportData));
      
      // Update case status
      caseObj.data.status = 'Completed';
      caseObj.data.dateCompleted = submissionDate;
      localStorage.setItem(caseObj.key, JSON.stringify(caseObj.data));
      
      return reportData;
    }

    function generateBilling(caseObj, billingDate) {
      const billingKey = `billing_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
      
      const amount = (Math.floor(Math.random() * 20) + 10) * 50; // $500-$1500 in $50 increments
      
      const billingData = {
        caseKey: caseObj.key,
        claimNumber: caseObj.data.claimNumber,
        client: caseObj.data.clientCompany,
        billingDate: billingDate,
        billingAmount: amount,
        investigatorAssigned: caseObj.data.investigatorAssigned,
        dateCreated: billingDate
      };

      localStorage.setItem(billingKey, JSON.stringify(billingData));
      
      // Update case status
      caseObj.data.status = 'Billed';
      localStorage.setItem(caseObj.key, JSON.stringify(caseObj.data));
      
      return billingData;
    }

    // Main generation functions
    function generateCompleteWorkflow(assignmentDaysAgo) {
      const assignmentDate = randomDate(assignmentDaysAgo);
      const claimNumber = generateClaimNumber();
      
      // Create case
      const caseObj = generateCase(claimNumber, assignmentDate, 'Open');
      log(`Created case ${claimNumber}`, 'success');
      
      // Schedule interview (1-3 days after assignment)
      const interviewDate = randomDateAfter(assignmentDate, 3);
      generateInterview(caseObj, interviewDate);
      log(`  - Scheduled interview for ${interviewDate}`, 'info');
      
      // Add update (1-5 days after interview)
      const updateDate = randomDateAfter(interviewDate, 5);
      generateUpdate(caseObj, updateDate);
      log(`  - Added update on ${updateDate}`, 'info');
      
      // Submit report (5-15 days after update)
      const reportDate = randomDateAfter(updateDate, 15);
      generateReport(caseObj, reportDate);
      log(`  - Submitted report on ${reportDate}`, 'info');
      
      // Bill case (1-7 days after report)
      const billingDate = randomDateAfter(reportDate, 7);
      generateBilling(caseObj, billingDate);
      log(`  - Billed case on ${billingDate}`, 'success');
      
      return caseObj;
    }

    function generatePartialWorkflow(status, assignmentDaysAgo) {
      const assignmentDate = randomDate(assignmentDaysAgo);
      const claimNumber = generateClaimNumber();
      
      const caseObj = generateCase(claimNumber, assignmentDate, status);
      log(`Created case ${claimNumber} (${status})`, 'success');
      
      if (status === 'Scheduled' || status === 'In Progress' || status === 'Completed') {
        const interviewDate = randomDateAfter(assignmentDate, 3);
        generateInterview(caseObj, interviewDate);
        log(`  - Scheduled interview for ${interviewDate}`, 'info');
      }
      
      if (status === 'In Progress' || status === 'Completed') {
        const updateDate = randomDateAfter(caseObj.data.firstInterviewDate || assignmentDate, 5);
        generateUpdate(caseObj, updateDate);
        log(`  - Added update on ${updateDate}`, 'info');
      }
      
      if (status === 'Completed') {
        const reportDate = randomDateAfter(caseObj.data.lastUpdate || assignmentDate, 10);
        generateReport(caseObj, reportDate);
        log(`  - Submitted report on ${reportDate}`, 'info');
      }
      
      return caseObj;
    }

    function generateSmallDataset() {
      log('Starting small dataset generation (5 cases)...', 'info');
      
      // 2 complete (billed) cases
      generateCompleteWorkflow(60);
      generateCompleteWorkflow(45);
      
      // 1 completed (ready to bill)
      generatePartialWorkflow('Completed', 20);
      
      // 1 in progress
      generatePartialWorkflow('In Progress', 10);
      
      // 1 open
      generatePartialWorkflow('Open', 5);
      
      log('Small dataset generation complete!', 'success');
      refreshStats();
    }

function generateMediumDataset() {
  log('Starting medium dataset generation (15 cases)...', 'info');

  // 5 complete (billed) cases
  for (let i = 0; i < 5; i++) {
    generateCompleteWorkflow(90 - i * 10);
  }

  // 3 completed (ready to bill)
  for (let i = 0; i < 3; i++) {
    generatePartialWorkflow('Completed', 30 - i * 5);
  }

  // 4 in progress
  for (let i = 0; i < 4; i++) {
    generatePartialWorkflow('In Progress', 20 - i * 3);
  }

  // 3 scheduled or open
  generatePartialWorkflow('Scheduled', 7);
  generatePartialWorkflow('Scheduled', 5);
  generatePartialWorkflow('Open', 2);

  log('Medium dataset generation complete! (15 cases)', 'success');
  refreshStats();
}
    function generateLargeDataset() {
      log('Starting large dataset generation (30 cases)...', 'info');
      
      // 12 complete (billed) cases
      for (let i = 0; i < 12; i++) {
        generateCompleteWorkflow(120 - i * 8);
      }
      
      // 6 completed (ready to bill)
      for (let i = 0; i < 6; i++) {
        generatePartialWorkflow('Completed', 45 - i * 5);
      }
      
      // 7 in progress
      for (let i = 0; i < 7; i++) {
        generatePartialWorkflow('In Progress', 30 - i * 3);
      }
      
      // 5 scheduled or open
      for (let i = 0; i < 5; i++) {
        const status = i % 2 === 0 ? 'Scheduled' : 'Open';
        generatePartialWorkflow(status, 10 - i * 2);
      }
      
      log('Large dataset generation complete!', 'success');
      refreshStats();
    }

    function clearAllData() {
      if (!confirm('Are you sure you want to delete ALL data? This cannot be undone!')) {
        return;
      }
      
      if (!confirm('Really delete everything? This will remove all cases, interviews, updates, reports, and billing records!')) {
        return;
      }
      
      log('Clearing all data...', 'error');
      
      const keysToDelete = [];
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key.startsWith('case_') || key.startsWith('interview_') || 
            key.startsWith('update_') || key.startsWith('reportSubmission_') || 
            key.startsWith('billing_')) {
          keysToDelete.push(key);
        }
      }
      
      keysToDelete.forEach(key => localStorage.removeItem(key));
      
      log(`Deleted ${keysToDelete.length} records`, 'error');
      log('All data cleared!', 'success');
      refreshStats();
    }

    function refreshStats() {
      let cases = 0, interviews = 0, updates = 0, reports = 0, billings = 0;
      
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key.startsWith('case_')) cases++;
        else if (key.startsWith('interview_')) interviews++;
        else if (key.startsWith('update_')) updates++;
        else if (key.startsWith('reportSubmission_')) reports++;
        else if (key.startsWith('billing_')) billings++;
      }
      
      document.getElementById('stat-cases').textContent = cases;
      document.getElementById('stat-interviews').textContent = interviews;
      document.getElementById('stat-updates').textContent = updates;
      document.getElementById('stat-reports').textContent = reports;
      document.getElementById('stat-billings').textContent = billings;
      
      log('Statistics refreshed', 'info');
    }

    // Initialize on load
    window.addEventListener('DOMContentLoaded', refreshStats);
  </script>
</body>
</html>
